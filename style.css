:root{
  --bg:#0b1220;
  --panel:#111827;
  --ink:#e5e7eb;
  --muted:#9ca3af;
  --accent:#22d3ee;
  --cell:#1f2430;
  --goal:#0ea5e9;
  --grid:#415064;
  --red:#ef4444;
  --green:#22c55e;
  --yellow:#f59e0b;
  --blue:#3b82f6;
  --purple:#a855f7;
  --orange:#fb923c; /* UUSI */
}

*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif}

.topbar{
  position:sticky;top:0;z-index:10;
  display:flex;gap:16px;align-items:center;justify-content:space-between;
  padding:12px 16px;background:linear-gradient(180deg,var(--panel),transparent);
  backdrop-filter: blur(6px);
}
.topbar h1{margin:0;font-size:1.2rem}
.controls{display:flex;gap:10px;align-items:center}
.controls button, .controls select{
  background:#0f172a;color:var(--ink);border:1px solid #263149;border-radius:10px;
  padding:8px 12px;cursor:pointer
}
.controls button:hover{border-color:var(--accent)}

main{max-width:900px;margin:16px auto;padding:0 16px; }
.hud{display:flex;gap:20px;  justify-content: center; align-items:center;margin:8px 0;color:var(--muted)}
#status{color:var(--accent)}

.board{
  width:min(80vmin,560px);
  aspect-ratio:1/1;
  margin:16px auto;
  display:grid;grid-template-columns:repeat(5,1fr);grid-template-rows:repeat(5,1fr);
  gap:6px;padding:10px;border-radius:16px;
  background:linear-gradient(180deg,#0f172a,#0b1220);
  box-shadow:0 10px 30px rgba(0,0,0,.35), inset 0 0 0 1px #1f2937;
  outline:none;
}
.cell{
  background:var(--cell);
  border-radius:12px;
  position:relative;
  display:flex;align-items:center;justify-content:center;
  box-shadow:inset 0 0 0 2px var(--grid);
}
.goalCell{box-shadow:inset 0 0 0 2px var(--goal), inset 0 0 0 6px rgba(14,165,233,.15)}

.robot{
  width:70%;height:70%;
  border-radius:12px;
  display:flex;align-items:center;justify-content:center;
  font-weight:700; letter-spacing:.5px;
  text-shadow:0 1px 2px rgba(0,0,0,.4);
  border:2px solid rgba(255,255,255,.25);
}
.robot.red{background:var(--red)}
.robot.orange{background:var(--orange);color:#111} /* UUSI */
.robot.green{background:var(--green)}
.robot.yellow{background:var(--yellow);color:#111}
.robot.blue{background:var(--blue)}
.robot.purple{background:var(--purple)}
.selected{outline:3px dashed var(--accent);outline-offset:4px}

.solutionBox{
  max-width:540px;margin:10px auto 0;background:rgba(255,255,255,.04);
  border:1px solid #24314a;border-radius:12px;padding:10px 12px;color:var(--muted)
}
.solutionTitle{font-weight:600;color:var(--ink);margin-bottom:6px}
.solutionList{margin:0;padding-left:22px}
.solutionList li{margin:2px 0}
.step{display:inline-flex;gap:6px;align-items:center;}
.pill{
  display:inline-flex;align-items:center;justify-content:center;
  min-width:20px;height:20px;padding:0 6px;border-radius:999px;
  color:#fff;font-weight:700;font-size:.8rem;border:1px solid rgba(255,255,255,.25)
}
.pill.red{background:var(--red)}
.pill.orange{background:var(--orange);color:#111} /* UUSI */
.pill.green{background:var(--green)}
.pill.yellow{background:var(--yellow);color:#111}
.pill.blue{background:var(--blue)}
.pill.purple{background:var(--purple)}
.arrow{font-weight:700;filter:drop-shadow(0 1px 0 rgba(0,0,0,.3))}

/* D-pad */
.moveArea{display:flex; justify-content:center; margin:16px 0;}
.dpad{
  display:grid;
  grid-template-columns:repeat(3, 64px);
  grid-template-rows:repeat(3, 48px);
  grid-template-areas:
    ". up ."
    "left reset right"
    ". down .";
  gap:8px; justify-content:center; align-items:center;
}
.dir{ width:100%; height:100%; background:#0f172a; color:var(--ink);
  border:1px solid #24314a; border-radius:10px; font-size:1.2rem; cursor:pointer;}
.dir.up{grid-area:up} .dir.down{grid-area:down}
.dir.left{grid-area:left} .dir.right{grid-area:right}
.resetBtn{ grid-area:reset; width:100%; height:100%; font-weight:700; letter-spacing:.5px;
  background:#e5e7eb; color:#111; border-radius:10px; border:2px solid #9ca3af; cursor:pointer;}
.resetBtn:hover{ background:#fff; }

footer{display:flex;justify-content:center;margin:20px 0;color:var(--muted)}

/* iOS/iPadOS safe areas ja landscape-säädöt, kuten sinulla jo oli */
html, body { height: 100%; }
body{
  min-height: 100svh;
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  overflow-y: auto;
}
@supports (height: 100dvh){
  body{ min-height: 100dvh; }
}
.topbar{ top: env(safe-area-inset-top); }
main{ padding-bottom: calc(env(safe-area-inset-bottom) + 16px); }

@media (orientation: landscape) and (max-height: 800px){
  html, body { height:auto; overflow-y:auto; -webkit-overflow-scrolling:touch; }
  body{ min-height:100svh; }
  @supports (height:100dvh){ body{ min-height:100dvh; } }
  main{
    flex:1 1 auto; min-height:0; overflow-y:auto; display:flex; flex-direction:column;
    align-items:center; gap:8px; width:100%; max-width:900px; margin:0 auto;
    padding-bottom: calc(env(safe-area-inset-bottom) + 12px);
  }
  .board{ width:min(54vmin, 416px); aspect-ratio:1/1; height:auto; margin:8px auto 4px; }
  .solutionBox{ max-width:560px; max-height:44vh; overflow-y:auto; font-size:.95rem; line-height:1.25; margin:6px auto 0; }
  .dpad{
    grid-template-columns: repeat(3, clamp(40px, 8vmin, 60px));
    grid-template-rows:    repeat(3, clamp(36px, 8vmin, 56px));
    gap:6px;
  }
}
@media (max-width: 768px) {
  h1 { display: none; }
}

@keyframes shrinkOut {
  from { transform: scale(1); opacity: 1; }
  to   { transform: scale(0); opacity: 0; }
}
.robot.fadeOut{
  animation: shrinkOut 2s ease forwards;
  will-change: transform, opacity;
  pointer-events: none;  /* ⬅️ estää klikkaukset heti kun animaatio alkaa */
}
